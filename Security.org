* Security
** Threats
*** Vulnerability
**** OS Command Injection

**** XSS / Cross-Site Scripting-
***** Measure
- 利用者
  - 会員登録したサイトを閲覧中は他のサイトを見に行かず、終了後は一旦ブラウザを終了させることでcookieを盗まれないようにする。
- 作成者
  - ユーザIDやユーザ認証に関わる情報は極力cookieには含めないようにし、セッションIDはセッションごとにランダムな値を生成することで、推測できないようにする。
**** SQL Injection

**** Code Injection

**** Baffer Error

**** Certification・Password Management

**** CSRF / Cross-Site Request Forjery
- 概要
  任意のHTTPリクエストを送信させられてしまう

- 手順
  1. 攻撃者が、攻撃用のWebページを作成しWWW上に公開する。
  2. 第三者が、攻撃用のWebページにアクセスする。
  3. 第三者は、攻撃者が用意した任意のHTTPリクエストを送信させられる。
  4. 送信させられたHTTPリクエストによって、攻撃者の意図した操作が行われる。

***** Measure
- 利用者
  ログアウトをしてセッションを破棄しておけば、認証段階の手続きが拒否されるので被害が抑えられる。
- Webサイト作成者側
  - FormをGetする際に、暗号論的擬似乱数値(nonce)を、Cookie値またはセッション、
    およびformのhidden値として発行し、HTTP POST時にその両者の値の同一性を検証する方法がある。
  - HTTP Refererを取得し照合することで、外部からの不正POSTを判別する。
    第三者サイトから、Refererを偽造したPOSTを送信することは不可能。

**** Session Fixation
- 手順
  1. 攻撃者があらかじめWebサイトからCookieとして有効なセッションIDを取得する。
  2. その後ユーザが攻撃者の仕掛けた悪意のWebサイトにアクセスした際、
     事前に手に入れたセッションIDをそのユーザのブラウザに強制的にセットする。
  3. その後第三者がWebサイトにアクセスすることで、セッションIDとユーザ情報が紐付けられ、
     攻撃者がユーザ情報を紐付いたセッションIDを自由に活用できてしまう。
  
- 原因
  Webサーバが発行し、アクセスするたびに値をブラウザが送り出すのが原則だが、
  ブラウザが送ってきたセッションIDが、自分の発行していないにもかかわらず、
  それを有効なセッションIDとして許可してしまうサーバがある場合、問題となる。

**** ARP spoofing
- ARPスプーフィング (ARP cache poisoning, ARP poison routing)
  ARPプロトコルの応答を偽装することにより、LAN上で通信機器のなりすましを行う技法。

**** IP spoofing

**** DNS spoofing
- DNS偽装, DNS cache poisoning
**** Buffer overflow, Buffer overrun
- 
*** Malware
**** Ransomware
**** Viruses
**** Trojan horses
**** Rootkits
**** Backdoors
**** Evasion

** Attacks
*** DoS
- Denial of Service
*** DDoS
- Distributed Denial of Service
*** Flood
**** SYN Flood
**** UDP Flood
**** Ping Flood
**** Smurf
- 
  送信元IPアドレスを偽装して、相手ネットワークのブロードキャストアドレス宛に大量のエコーリクエストを送りつける。
**** fraggle
**** Connection Flood
**** Reload

*** Scan
**** Address scan
- 会社のドメイン名やwhoisデータベースで得られるイIPアドレスを手掛かりとし、
  周辺のアドレス全般に対しpingコマンドを実行すると、接続可能なホストのIPアドレスの一覧が得られる。
**** Port scan
- ターゲットとするサーバに対し、どのようなサービスが利用できるかを調査する。
  
***** Stealth scan ステルススキャン
- サーバにログを残さずにポートスキャンを行う方法。
  通常の接続手段から外れた応答を行うことによりログを残さずにスキャンすること。
  具体的には、接続確率前にRSTを送信して接続を中断する「SYNスキャン」や、
  接続が確率していないのにFINを送りつけて応答を見る「FINスキャン」などの手法がある。

***** Half-open scanハーフオープンスキャン
**** Banner check バナーチェック
- コンピュータ上で動作しているソフトウェアへ外部からメッセージを送り、それへの応答を取得してソフトウェアの種類やバージョンなどを調べること
*** Password Clack
**** 総当り攻撃
**** 辞書攻撃
**** rainbowクラック
- 先にパスワードを暗号化したものをデータベース化（rainbow table）し、
  暗号化されたパスワードとデータベースを比較する
**** 盗聴
*** Eavesdrop 盗聴
**** Local
- snifferと呼ばれるネットワーク解析ツールで、プロミスキャスモードとすることでパケットを受信可能。
  SSLやsshを用いることで通信を暗号化することが効果的。
**** Man In The Middle
- ARPキャッシュを改ざんし、通信の間に入り込み盗聴を行う。
  ARPキャッシュを改ざんすることをARPポイズニングという。
**** Key logger
- キーボード操作を記録するプログラム。
** Defences
*** Security Tools or Systems
**** Firewall
**** Encryption
***** PGP
- Pretty Good Privacy
  OpenPGP:RFC4880
*** Cryptography
**** Cryptograhic hash function
- 暗号学的ハッシュ関数

***** アルゴリズム
- MD5
- SHA-1
- SHA-256

*** Authentication

*** Authorization
** SSO
*** 認証クッキー
- 
  Webは本来ステートレスだが、ブラウザを介してクッキーを伝達することにより、状態を共有する仕掛けを提供する。
  伝達範囲が同じ認証ドメイン内に制限されている。
  
*** PMI
- Privilege Management Infrastructure
  
*** SAML
- Security Assertion Markup Language
  XMLをベースにした、異なるインターネットドメイン間でユーザ認証を行うためのXMLをベースにした標準規格。
  2002年に策定、2005年にバージョン2.0。
  
  クッキーを用いず、クッキーの柔軟性を継承し、クッキーの持つスケーラビリティの制限とセキュリティ問題を解決することを目指して設計された。

  セキュリティ情報交換のためのXMLベースのフレームワーク。

**** Authentication Assertion
- 認証情報伝達サービス
**** Authorization Assertion
- 属性情報の伝達
  
**** Authorization Decision Assertion
- アクセス制御情報の伝達

**** XACML
- eXtensible Access Control Markup Language
  
- 
  - http://www.atmarkit.co.jp/ait/articles/0210/02/news002.html
  - http://www.cybernet.co.jp/onelogin/function/saml.html

**** Liberty Alliance

**** .NET Passport
**** Link
- [[https://www.oasis-open.org/standards#samlv2.0][SAML v2.0 - OASIS Standards]]

- http://www.atmarkit.co.jp/ait/articles/0210/02/news002.html

** Glossary
*** nonce
- 
  number used onceのことで、1回だけ使われる番号、という意味。
  ワンタイムトークンとも呼ばれる。
  
*** http referer
- 
  HTTPヘッダの1つで、1つのウェブページまたはリソースから見て、
  それにリンクしているウェブページやリソースのアドレスを指す。
  リファラを参照することで、どこからそのページに要求が来たのかを知ることができ、
  プロモーションやセキュリティの目的で使うことができる。

*** Authentication/Authorization 認証・認可
- Authentication 認証
  本人確認。
- Authorization 認可
  特定のリソースへのアクセス権限の付与

*** ゼロデイ
- バッチや対応策が準備される前に脆弱性を利用した攻撃コードが広まること
*** 認証方法(DV,OV,EV)
**** DV ドメイン認証型
- ドメインの管理権限を元に発行される。SSL証明書の発行が可能。
  人が介在しないので、他の認証に比べ相対的に
  Let's encryptは現段階でDVのみ。将来的には価値が下がっていく可能性がある。
**** OV 実在証明型
- 
**** EV EVタイプ
- 
  URLがグリーンで表示される。
  DVとOVの違いが見た目で
** Tools
*** Burp Proxy
- [[https://portswigger.net/burp/proxy.html][Burp Proxy - PORTSWIGGER]]
*** FOCA
- [[https://www.elevenpaths.com/labstools/foca/index.html][FOCA - Eleven Paths]]
*** Evil FOCA
- [[https://www.elevenpaths.com/labstools/evil-foca/index.html][Evil FOCA - Eleven Paths]]

** Memo
*** Securityの6要素
**** 3大要素(CIA)
***** Counfidentiality
- 機密性
  認可されたものだけが情報にアクセスできる
***** Integrity
- 完全性
  正確であることおよび完全であることを保証すること
***** Availavility
- 可用性
  認可されたユーザが、必要時に情報および関連財産にアクセスできることを確実にすること
**** 追加された要素
***** Accountability
- 説明追跡性（説明可能性）
  ユーザやサービスの行動、責任が説明できること。
***** Authenticity
- 真正性（認証性）
  ユーザ、システムによる振る舞いが明確であること。
  なりすましや偽の情報でないことが証明できること
***** Reliability
- 信頼性
  システムやプロセスが矛盾なく動作すること。
*** 対策の考え方・分類
**** 時系列
***** 事前対策
***** 発生時対策
***** 発生後対応、見直し
***** 日常運用
**** 管理方法
***** 技術面
- 例
  ファイアウォール、ウィルス対策サーバ、
***** 運用面
- 例
  情報収集、入退室管理、
***** セキュリティポリシー面
- 社内規定による罰則、利用停止を含む利用規定の作成
**** リスクコントロール
***** 抑止
- 驚異の発生する可能性をなくす、低くする
  発生する前
***** 予防
- 脅威が発生した際の被害を小さくする、被害を受けにくい状態にしておく。
  発生後
***** 検知
- 問題の発生を速やかに発見できるようにする
***** 回復
- 正常な状態まで戻すことが出来るように備えておく考え方。
**** リスク管理
***** 許容
- 発生頻度や損害額が低いと判断できる場合、特に対策を行わない。
***** 低減
- リスクの発生頻度や損害額を、対策を行い低くすること
***** 移転
- 外部委託を行う等で、自社のリスクを他者に負わせること。
***** 回避
- 脅威発生の要因を停止あるいは全く別の方法に変更することにより、リスクが発生する可能性を取り去ること
*** 直接的な脅威の種類
**** 破壊
**** 漏洩
**** 改ざん
**** 盗聴
**** 盗難
**** サービス停止
**** 不正利用
**** 踏み台
**** ウィルス感染
*** News
**** DigiNoater(2011)
- オランダの認証局
**** Ransomware対策(2015/11/11)
- 
  ランサムウェアが猛威を振るっている。
  セキュリティ対策としては、バックアップを取ることが、現在一番重要。

- 
** Link
- [[http://d.hatena.ne.jp/Kango/][piyolog]] 
- [[http://krebsonsecurity.com/][Krebs on Security]]
- [[https://the01.jp/][THE ZERO/ONE]]
- [[https://hackforums.net/index.php][Hack Forums]]
- [[http://securityaffairs.co/wordpress/][security affairs]]
